<!--
Element which encapsulates the functionality for the Basket resource of the Paylogic Ticketing API.

##### Example

    <basket-service
      id="basket-service"
      authToken="{{authToken}}"
      baseUrl="{{baseUrl}}"></basket-service>

@element basket-service
@blurb Element which encapsulates the functionality for the Basket resource of the Paylogic Ticketing API.
@status alpha
-->

<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="resource-service.html">

<polymer-element name="basket-service" extends="resource-service">

  <script>

    Polymer('basket-service', {

      /**
       * Fired when the baskets have been loaded from the API. Inherited from resource-service element.
       *
       * @event baskets-loaded
       */

       /**
       * Fired when a basket has been created. Inherited from resource-service element.
       *
       * @event baskets-created
       */

       /**
       * Fired when a basket has been updated. Inherited from resource-service element.
       *
       * @event baskets-updated
       */

       /**
       * Fired when a basket has been deleted. Inherited from resource-service element.
       *
       * @event baskets-deleted
       */

      /**
       * The type of the resource.
       *
       * @attribute resource
       * @type string
       * @default baskets
       */
      resource: 'baskets',

      /**
       * Create a basket.
       *
       * params is optional and can contain a profile revision uri.
       *
       */
      create: function(params) {
        if (params !== undefined) {
          this.$.ajaxPOST.xhrArgs = {
            body: JSON.stringify(params)
          };
        }
        this.$.ajaxPOST.go();
      },

      /**
       * Update a basket.
       *
       * params must have the following form
       *   { basketUri: "basketUri" }
       *
       * params can contain optional extra fields to update the bakset with. For example,
       *   { "basketUri": "basketUri", "data": { "profile": "profileRevisionUri"} }
       *
       */
      update: function(params) {
        this.resourceUid = this.getResourceUid(params.basketUri)
        this.$.ajaxPUT.xhrArgs = {
          body: JSON.stringify(params.data)
        };
        this.$.ajaxPUT.go();
      },

      /**
       * Delete a basket.
       *
       * params must have the following form
       *   { basketUri: "basketUri" }
       *
       */
      delete: function(params) {
        this.resourceUid = this.getResourceUid(params.basketUri)
        this.$.ajaxDELETE.xhrArgs = {
          body: JSON.stringify(params)
        };
        this.$.ajaxDELETE.go();
      },

    });

  </script>

</polymer-element>
